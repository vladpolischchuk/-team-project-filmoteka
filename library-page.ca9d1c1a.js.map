{"mappings":"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","sources":["src/js/library/from-local-storage-info.js","src/js/library/library-buttons-activate.js","src/js/library/my-library.js"],"sourcesContent":["const isMovieInWatched = () => {\n    let watchedMovies = null;\n    try {\n        watchedMovies = JSON.parse(localStorage.getItem('Watched movies'));\n    } catch {\n        return;\n    }\n    return watchedMovies;\n}\n\nconst isMovieInQueue = () => {\n    let queueMovies = null;\n    try {\n        queueMovies = JSON.parse(localStorage.getItem('Queue movies'));\n    } catch {\n        return;\n    }\n    return queueMovies;\n}\n\nexport { isMovieInWatched, isMovieInQueue };","const watchedBtn = document.querySelector('.button-container__watched');\n\nfunction activateWatchedBtn() {\n    watchedBtn.classList.add('is-active')\n};\n\nfunction deactiveWatchedBtn() {\n    watchedBtn.classList.remove('is-active')\n};       \n\nfunction activateQueueBtn() {\n    queueBtn.classList.add('is-active')\n}\n\nfunction deactivateQueueBtn() {\n    queueBtn.classList.remove('is-active')\n}\n\nexport { activateWatchedBtn, activateQueueBtn, deactiveWatchedBtn, deactivateQueueBtn };","import { fetchMovieInfoAPI } from '../film-api';\nimport {\n    activateWatchedBtn,\n    activateQueueBtn,\n    deactiveWatchedBtn,\n    deactivateQueueBtn,\n} from './library-buttons-activate';\nimport { isMovieInWatched, isMovieInQueue } from './from-local-storage-info';\n\nconst IF_LIBRARY_EMPTY_IMG = 'image class=\"message-image\" src=\"https://i.imgur.com/Ud8xgso.gif\"/>';\n\nconst library = document.querySelector('.library');\nconst watchedBtn = document.querySelector('.button-container__watched');\nconst queueBtn = document.querySelector('.button-container__queu');\nconst message = document.querySelector('.message');\n\nlet watchedMovies = isMovieInWatched();\nlet queueMovies = isMovieInQueue();\n\nif (\n    (watchedMovies == null || watchedMovies.length === 0) &&\n    (queueMovies == null || queueMovies.length === 0)\n) {\n    message.innerHTML = `<p class=\"message-text\">You library is empty yet</p>${IF_LIBRARY_EMPTY_IMG}`;\n    library.innerHTML = '';\n} else if (watchedMovies.length > 0) {\n    activateWatchedBtn();\n    renderLibrary(watchedMovies);\n} else if (queueMovies.length > 0) {\n    activateQueueBtn();\n    renderLibrary(queueMovies);\n}\n\nfunction renderLibrary(movies) {\n    for (let i = 0; i < movies.length; i += 1)\n        fetchMovieInfoAPI(filmModalId).then(data => {\n            library.insertAdjacentHTML('beforeend', createLibraryMovieItem(data));\n        })\n    }\n\nconst onWatchedBtnClick = (event) => {\n    deactivateQueueBtn();\n    activateWatchedBtn();\n    clearLibrary();\n\n    watchedMovies = isMovieInWatched();\n\n    if (watchedMovies == null || watchedMovies.length === 0) {\n        message.innerHTML = `<p class=\"message-text\">Your watched list is empty yet</p>${IF_LIBRARY_EMPTY_IMG}`;\n        library.innerHTML = '';\n    } else if (watchedMovies.length > 0) {\n        library.innerHTML = '';\n        renderLibrary(watchedMovies);\n    }\n};\n\n\nconst onQueueBtnClick = (event) => {\n    activateQueueBtn();\n    deactiveWatchedBtn();\n    clearLibrary();\n\n    queueMovies = isMovieInQueue();\n\n    if (queueMovies == null || queueMovies.length === 0) {\n        message.innerHTML = `<p class=\"message-text\">Your queue list is empty yet</p>${IF_LIBRARY_EMPTY_IMG}`;\n        library.innerHTML = '';\n    } else if (queueMovies.length > 0) {\n        library.innerHTML = '';\n        renderLibrary(queueMovies);\n    }\n};\n\nfunction clearLibrary() {\n    library.innerHTML = '';\n}\n\nfunction createLibraryMovieItem(data, genres_names) {\n  if (data.length === 0) {\n    return;\n  }\n  return data\n    .map(({ id, title, poster_path, release_date, genre_ids }) => {\n      let release = release_date.slice(0, 4);\n      let genres = [];\n      for (let genre_id of genre_ids) {\n        let genre = genres_names.find(({ id }) => id === genre_id);\n        genres.push(genre.name);\n      }\n      if (genres.length >= 3) {\n        genres = [genres[0], genres[1], 'Other'];\n      }\n      let genres_str = genres.join(', ');\n      return `<li class=\"card\">\n  <a href=\"\" class=\"card-link link\" data-id=\"${id}\">\n    <img class=\"card-img\" src=\"${basicImgURL}${poster_path}\" alt=\"${title}\">\n    <h3 class=\"card-name\">${title}</h3>\n    <div class=\"card-item\">\n      <p class=\"card-genres\">${genres_str}</p>\n      <p class=\"card-year\"><span class=\"card-line\">|</span>${release}</p>\n    </div>\n  </a>\n</li>`;\n    })\n    .join('');\n}\n\n\nwatchedBtn.addEventListener('click', onWatchedBtnClick);\nqueueBtn.addEventListener('click', onQueueBtnClick);\n\n\n\n// треба описати клас is-active для кнопок"],"names":["$4bf6fe09158a34cd$export$6f2705b68ffed592","watchedMovies","JSON","parse","localStorage","getItem","e","$4bf6fe09158a34cd$export$c87fd7cccbc83cb7","queueMovies","$c448e337895828a0$var$watchedBtn","document","querySelector","$c448e337895828a0$export$cfde98e34fee1ead","classList","add","$c448e337895828a0$export$af8f632b06b38e33","queueBtn","$9TUSr","parcelRequire","$40b8f30e28d51416$var$IF_LIBRARY_EMPTY_IMG","$40b8f30e28d51416$var$library","$40b8f30e28d51416$var$watchedBtn","$40b8f30e28d51416$var$queueBtn","$40b8f30e28d51416$var$message","$40b8f30e28d51416$var$watchedMovies","$40b8f30e28d51416$var$queueMovies","$40b8f30e28d51416$var$renderLibrary","movies","i","length","fetchMovieInfoAPI","filmModalId","then","data","insertAdjacentHTML","$40b8f30e28d51416$var$createLibraryMovieItem","innerHTML","concat","$40b8f30e28d51416$var$clearLibrary","genres_names","map","param1","id1","id","title","poster_path","release_date","genre_ids","release","slice","genres","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step1","genre_id","_step","value","genre","find","param","push","name","_iterator","Symbol","iterator","next","done","_loop","err","return","genres_str","join","basicImgURL","addEventListener","event","remove"],"version":3,"file":"library-page.ca9d1c1a.js.map"}